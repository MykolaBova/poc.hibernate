<!DOCTYPE html><html lang="en"><title>Hibernate &#8211; Cascade example (save, update, delete and delete-orphan)</title><head><link rel="stylesheet" type="text/css" href="http://www.mkyong.com/wp-content/cache/minify/000000/481ba/default.include.b22e3d.css" media="all" /><meta name="generator" content="WordPress 3.5.1" /><meta name="google-site-verification" content="VsVvSTVAouAluNodWeR30BeIWTr4c84HvN4Fn9WBsak" /><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href="/wp-content/themes/mkyong-ma/images/favicon.ico" /><script type='text/javascript' src='http://www.mkyong.com/wp-includes/js/comment-reply.min.js?ver=3.8.3'></script><link rel='prev' title='Hibernate &#8211; One-to-Many example (XML Mapping)' href='http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example/' /><link rel='next' title='Hibernate – One-to-One example (XML Mapping)' href='http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/' /><link rel='shortlink' href='http://www.mkyong.com/?p=3177' /><meta name="keywords" content="cascade,hibernate" /><link rel="canonical" href="http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/" /></head><body><div id="header-top"><div class="container"><div id="header-top-container"><ul><li><a href="/advertise-on-mkyong/" rel="nofollow">Advertise</a></li><li><a href="/contact-mkyong/" rel="nofollow">Contact Us</a></li><li><a href="/write-for-us/" rel="nofollow">Write For Us</a></li><li> <a href="http://feeds.feedburner.com/FeedForMkyong" rel="nofollow" title="RSS feed">RSS feed</a></li><li><a href="/blog/donate-to-charity/" rel="nofollow">Donate</a></li></ul></div></div></div><div id="header"><div class="container"><div id="header-logo"> <a href="/" title="mkyong.com"><div id="logo" ></div> </a></div><div id="header-banner"><div data-type="ad" data-publisher="lqm.j2ee.site" data-zone="ron" data-format="728x90" data-tags="Java%2cSpring%2cAndroid%2cMobile%2cjQuery%2cUnit%20Test%2cASP.NET%20MVC%2cDI%2cTDD"></div></div></div></div><div id="menu"><div class="container"><ul><li class="menu-allround"> <a href="/">Home</a></li><li class="menu-allround"> <a href="/all-tutorials-on-mkyong-com/">All Tutorials</a></li><li class="menu-topround"> <a href="#">Java Core</a><div id="java-menu" class="dropdown"><div class="tut-title">Java Core Tutorials</div><div class="dropdown-item"> <a href="/tag/java/"><div class="images img-border img-java img-holder"></div> </a><div>1. <a href="/tutorials/java-io-tutorials/">Java I/O</a></div><div>2. <a href="/tutorials/java-xml-tutorials/">Java XML</a></div><div>3. <a href="/tutorials/java-json-tutorials/">Java JSON</a></div><div>4. <a href="/tutorials/java-regular-expression-tutorials/">Java RegEx</a></div><div>5. <a href="/tutorials/jdbc-tutorials/">JDBC</a></div><div>6. <a href="/tag/java/">Java Misc</a></div></div></div></li><li class="menu-topround"> <a href="#">JSF</a><div id="jsf-menu" class="dropdown"><div class="tut-title">JSF Tutorials</div><div class="dropdown-item"><a href="/tutorials/jsf-2-0-tutorials/"><div class="images img-border img-jsf2 img-holder"></div> </a><div>1. <a href="/tutorials/jsf-2-0-tutorials/">JSF 2.0</a></div></div></div></li><li class="menu-topround"> <a href="#">Spring</a><div id="spring-menu" class="dropdown"><div class="tut-title">Spring Tutorials</div><div class="dropdown-item"> <a href="/tutorials/spring-tutorials/"><div class="images img-border img-spring img-holder"></div> </a><div>1. <a href="/tutorials/spring-tutorials/">Spring Core</a></div><div>2. <a href="/tutorials/spring-mvc-tutorials/">Spring MVC</a></div><div>3. <a href="/tutorials/spring-security-tutorials/">Spring Security</a></div><div>4. <a href="/tutorials/java-mongodb-tutorials/#spring-mongodb">Spring MongoDB</a></div><div>5. <a href="/tutorials/spring-batch-tutorial/">Spring Batch</a></div></div></div></li><li class="menu-topround"> <a href="#">Hibernate</a><div id="hibernate-menu" class="dropdown"><div class="tut-title">Hibernate Tutorials</div><div class="dropdown-item"> <a href="/tutorials/hibernate-tutorials/"><div class="images img-border img-hibernate img-holder"></div> </a><div>1. <a href="/tutorials/hibernate-tutorials/">Hibernate Core</a></div></div></div></li><li class="menu-topround"> <a href="#">Struts</a><div id="struts-menu" class="dropdown"><div class="tut-title">Struts Tutorials</div><div class="dropdown-item"><a href="/tutorials/struts-2-tutorials/"><div class="images img-border img-struts img-holder"></div> </a><div>1. <a href="/tutorials/struts-tutorials/">Struts 1</a></div><div>2. <a href="/tutorials/struts-2-tutorials/">Struts 2</a></div></div></div></li><li class="menu-topround"> <a href="#">Android</a><div id="android-menu" class="dropdown"><div class="tut-title">Android Tutorials</div><div class="dropdown-item"> <a href="/tutorials/android-tutorial/"><div class="images img-border img-android img-holder"></div> </a><div>1. <a href="/tutorials/android-tutorial/">Android Core</a></div></div></div></li><li class="menu-topround"> <a href="#">Others</a><div id="misc-menu" class="dropdown"><div class="dropdown-item"><ol><li><a href="/tutorials/wicket-tutorials/">Apache Wicket</a></li><li><a href="/tutorials/jax-ws-tutorials/">JAX-WS (SOAP)</a></li><li><a href="/tutorials/jax-rs-tutorials/">JAX-RS (REST)</a></li><li><a href="/tutorials/maven-tutorials/">Maven</a></li><li><a href="/tutorials/google-app-engine-tutorial/">Google App Engine</a></li><li><a href="/tutorials/java-mongodb-tutorials/">Java MongoDB</a></li><li><a href="/tutorials/junit-tutorials/">jUnit</a></li><li><a href="/tutorials/testng-tutorials/">TestNG</a></li><li><a href="/tutorials/jquery-tutorials/">jQuery</a></li><li><a href="/tutorials/quartz-scheduler-tutorial/">Quartz Scheduler</a></li></ol></div></div></li></ul><div style="float:right;margin:4px 0"><form action="/search/" id="cse-search-box"><div> <input type="hidden" name="cx" value="partner-pub-2836379775501347:3714346998" /> <input type="hidden" name="cof" value="FORID:10" /> <input type="hidden" name="ie" value="UTF-8" /> <input type="text" name="q" size="30" style="height:20px;font-size:10pt;" /> <input type="submit" name="sa" value="Search" style="height:25px;"  /></div></form></div></div></div><div class="container"><div class="row"><div class="span10"><!-- google_ad_section_start(name=mkyongregion) --><div id="post-container"> <article class="post" id="post-3177"><header><h1> Hibernate &#8211; Cascade example (save, update, delete and delete-orphan)</h1><div class='post-meta'><div id="small-author-avatar"> <img alt='' src='http://0.gravatar.com/avatar/622c70d2908e68ecc070ca6754245bb2?s=40&amp;d=http%3A%2F%2Fwww.mkyong.com%2Fwp-content%2Fthemes%2Fmkyongnew%2Fimages%2Favatar-guest.jpg%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' /></div><div> Posted on <time datetime="2010-02-02T10:02:28+00:00">February 2, 2010</time><span> , &nbsp;&nbsp;&nbsp; Last modified : August 30, 2012 </span><div> By <a href="http://www.mkyong.com/author/mkyong/" rel="author">mkyong</a></div></div></div> </header><div class="post-content"><div id='dd_light_ajax_float'><div id='dd_content_wrap'><div class='dd_light_button'><div class='dd-loading' id='dd-google' ></div><div class='g-plusone' data-size='tall'></div></div><div class='dd_light_button'><div class='dd-loading' id='dd-fblike' ></div><iframe id='dd-fblike-iframe' src='' height='0' width='0' scrolling='no' frameborder='0'></iframe></div><div class='dd_light_button'><div class='dd-loading' id='dd-twitter' ></div><a href='https://twitter.com/share' class='twitter-share-button' data-via='mkyong' data-count='vertical'></a></div></div></div><blockquote><p>Cascade is a convenient feature to save the lines of code needed to manage the state of the other side manually.</p></blockquote><p>The &#8220;Cascade&#8221; keyword is often appear on the collection mapping to manage the state of the collection automatically. In this tutorials, this <a href="http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example/" target="_blank">one-to-many example</a> will be used to demonstrate the cascade effect.</p><h3>Cascade save / update example</h3><p>In this example, if a &#8216;Stock&#8217; is saved, all its referenced &#8216;stockDailyRecords&#8217; should be saved into database as well.</p><h4>1. No save-update cascade</h4><p>In <a href="http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example/" target="_blank">previous section</a>, if you want to save the &#8216;Stock&#8217; and its referenced &#8216;StockDailyRecord&#8217; into database, you need to save both individually.</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">Stock stock <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Stock<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
StockDailyRecord stockDailyRecords <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> StockDailyRecord<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #666666; font-style: italic;">//set the stock and stockDailyRecords  data</span>
&nbsp;
stockDailyRecords.<span style="color: #006633;">setStock</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>        
stock.<span style="color: #006633;">getStockDailyRecords</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">add</span><span style="color: #009900;">&#40;</span>stockDailyRecords<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
session.<span style="color: #006633;">save</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
session.<span style="color: #006633;">save</span><span style="color: #009900;">&#40;</span>stockDailyRecords<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p><em>Output</em></p><div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">Hibernate: 
    insert into mkyong.stock <span style="color: #7a0874; font-weight: bold;">&#40;</span>STOCK_CODE, STOCK_NAME<span style="color: #7a0874; font-weight: bold;">&#41;</span> 
    values <span style="color: #7a0874; font-weight: bold;">&#40;</span>?, ?<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
Hibernate: 
    insert into mkyong.stock_daily_record
    <span style="color: #7a0874; font-weight: bold;">&#40;</span>STOCK_ID, PRICE_OPEN, PRICE_CLOSE, PRICE_CHANGE, VOLUME, DATE<span style="color: #7a0874; font-weight: bold;">&#41;</span> 
    values <span style="color: #7a0874; font-weight: bold;">&#40;</span>?, ?, ?, ?, ?, ?<span style="color: #7a0874; font-weight: bold;">&#41;</span></pre></div></div><div><div style="margin:20px 0;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-2836379775501347" data-ad-slot="7391621200" data-ad-region="mkyongregion"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h4>2. With save-update cascade</h4><p>The <strong>cascade=&#8221;save-update&#8221;</strong> is declared in &#8216;stockDailyRecords&#8217; to enable the save-update cascade effect.</p><div class="wp_syntax"><div class="code"><pre class="xml" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- Stock.hbm.xml --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;set</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;stockDailyRecords&quot;</span> <span style="color: #000066;">cascade</span>=<span style="color: #ff0000;">&quot;save-update&quot;</span> <span style="color: #000066;">table</span>=<span style="color: #ff0000;">&quot;stock_daily_record&quot;</span>...<span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;column</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;STOCK_ID&quot;</span> <span style="color: #000066;">not-null</span>=<span style="color: #ff0000;">&quot;true&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;one-to-many</span> <span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;com.mkyong.common.StockDailyRecord&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/set<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></div></div><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">Stock stock <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Stock<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
StockDailyRecord stockDailyRecords <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> StockDailyRecord<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #666666; font-style: italic;">//set the stock and stockDailyRecords  data</span>
&nbsp;
stockDailyRecords.<span style="color: #006633;">setStock</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>        
stock.<span style="color: #006633;">getStockDailyRecords</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">add</span><span style="color: #009900;">&#40;</span>stockDailyRecords<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
session.<span style="color: #006633;">save</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p><em>Output</em></p><div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">Hibernate: 
    insert into mkyong.stock <span style="color: #7a0874; font-weight: bold;">&#40;</span>STOCK_CODE, STOCK_NAME<span style="color: #7a0874; font-weight: bold;">&#41;</span> 
    values <span style="color: #7a0874; font-weight: bold;">&#40;</span>?, ?<span style="color: #7a0874; font-weight: bold;">&#41;</span>
&nbsp;
Hibernate: 
    insert into mkyong.stock_daily_record
    <span style="color: #7a0874; font-weight: bold;">&#40;</span>STOCK_ID, PRICE_OPEN, PRICE_CLOSE, PRICE_CHANGE, VOLUME, DATE<span style="color: #7a0874; font-weight: bold;">&#41;</span> 
    values <span style="color: #7a0874; font-weight: bold;">&#40;</span>?, ?, ?, ?, ?, ?<span style="color: #7a0874; font-weight: bold;">&#41;</span></pre></div></div><p>The code <strong>session.save(stockDailyRecords);</strong> is no longer required, when you save the &#8216;Stock&#8217;, it will &#8220;cascade&#8221; the save operation to it&#8217;s referenced &#8216;stockDailyRecords&#8217; and save both into database automatically.</p><h3>Cascade delete example</h3><p>In this example, if a &#8216;Stock&#8217; is deleted, all its referenced &#8216;stockDailyRecords&#8217; should be deleted from database as well.</p><div><div style="margin:20px 0;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-2836379775501347" data-ad-slot="3642936086" data-ad-region="mkyongregion"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><h4>1. No delete cascade</h4><p>You need to loop all the &#8216;stockDailyRecords&#8217; and delete it one by one.</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">Query q <span style="color: #339933;">=</span> session.<span style="color: #006633;">createQuery</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;from Stock where stockCode = :stockCode &quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
q.<span style="color: #006633;">setParameter</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;stockCode&quot;</span>, <span style="color: #0000ff;">&quot;4715&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
Stock stock <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>Stock<span style="color: #009900;">&#41;</span>q.<span style="color: #006633;">list</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">for</span> <span style="color: #009900;">&#40;</span>StockDailyRecord sdr <span style="color: #339933;">:</span> stock.<span style="color: #006633;">getStockDailyRecords</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span>
         session.<span style="color: #006633;">delete</span><span style="color: #009900;">&#40;</span>sdr<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span>
 session.<span style="color: #006633;">delete</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p><em>Output</em></p><div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">Hibernate: 
    delete from mkyong.stock_daily_record 
    where <span style="color: #007800;">DAILY_RECORD_ID</span>=?
&nbsp;
Hibernate: 
    delete from mkyong.stock 
    where <span style="color: #007800;">STOCK_ID</span>=?</pre></div></div><h4>2. With delete cascade</h4><p>The <strong>cascade=&#8221;delete&#8221;</strong> is declared in &#8216;stockDailyRecords&#8217; to enable the delete cascade effect. When you delete the &#8216;Stock&#8217;, all its reference &#8216;stockDailyRecords&#8217; will be deleted automatically.</p><div class="wp_syntax"><div class="code"><pre class="xml" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- Stock.hbm.xml --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;set</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;stockDailyRecords&quot;</span> <span style="color: #000066;">cascade</span>=<span style="color: #ff0000;">&quot;delete&quot;</span> <span style="color: #000066;">table</span>=<span style="color: #ff0000;">&quot;stock_daily_record&quot;</span> ...<span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;column</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;STOCK_ID&quot;</span> <span style="color: #000066;">not-null</span>=<span style="color: #ff0000;">&quot;true&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;one-to-many</span> <span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;com.mkyong.common.StockDailyRecord&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/set<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></div></div><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">Query q <span style="color: #339933;">=</span> session.<span style="color: #006633;">createQuery</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;from Stock where stockCode = :stockCode &quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
q.<span style="color: #006633;">setParameter</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;stockCode&quot;</span>, <span style="color: #0000ff;">&quot;4715&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
Stock stock <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>Stock<span style="color: #009900;">&#41;</span>q.<span style="color: #006633;">list</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
session.<span style="color: #006633;">delete</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p><em>Output</em></p><div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">Hibernate: 
    delete from mkyong.stock_daily_record 
    where <span style="color: #007800;">DAILY_RECORD_ID</span>=?
&nbsp;
Hibernate: 
    delete from mkyong.stock 
    where <span style="color: #007800;">STOCK_ID</span>=?</pre></div></div><h3>Cascade delete-orphan example</h3><p>In above cascade delete option, if you delete a Stock , all its referenced &#8216;stockDailyRecords&#8217; will be deleted from database as well. How about if you just want to delete two referenced &#8216;stockDailyRecords&#8217; records? This is called orphan delete, see example&#8230;</p><h4>1. No delete-orphan cascade</h4><p>You need to delete the &#8216;stockDailyRecords&#8217; one by one.</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">StockDailyRecord sdr1 <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>StockDailyRecord<span style="color: #009900;">&#41;</span>session.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span>StockDailyRecord.<span style="color: #000000; font-weight: bold;">class</span>, 
                                            <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">Integer</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">56</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
StockDailyRecord sdr2 <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>StockDailyRecord<span style="color: #009900;">&#41;</span>session.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span>StockDailyRecord.<span style="color: #000000; font-weight: bold;">class</span>, 
                                            <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">Integer</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">57</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
session.<span style="color: #006633;">delete</span><span style="color: #009900;">&#40;</span>sdr1<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
session.<span style="color: #006633;">delete</span><span style="color: #009900;">&#40;</span>sdr2<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p><em>Output</em></p><div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">Hibernate: 
    delete from mkyong.stock_daily_record 
    where <span style="color: #007800;">DAILY_RECORD_ID</span>=?
Hibernate: 
    delete from mkyong.stock_daily_record 
    where <span style="color: #007800;">DAILY_RECORD_ID</span>=?</pre></div></div><h4>2. With delete-orphan cascade</h4><p>The <strong>cascade=&#8221;delete-orphan&#8221;</strong> is declared in &#8216;stockDailyRecords&#8217; to enable the delete orphan cascade effect. When you save or update the Stock, it will remove those &#8216;stockDailyRecords&#8217; which already mark as removed.</p><div class="wp_syntax"><div class="code"><pre class="xml" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- Stock.hbm.xml --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;set</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;stockDailyRecords&quot;</span> <span style="color: #000066;">cascade</span>=<span style="color: #ff0000;">&quot;delete-orphan&quot;</span> <span style="color: #000066;">table</span>=<span style="color: #ff0000;">&quot;stock_daily_record&quot;</span> <span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;column</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;STOCK_ID&quot;</span> <span style="color: #000066;">not-null</span>=<span style="color: #ff0000;">&quot;true&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;one-to-many</span> <span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;com.mkyong.common.StockDailyRecord&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/set<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></div></div><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">StockDailyRecord sdr1 <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>StockDailyRecord<span style="color: #009900;">&#41;</span>session.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span>StockDailyRecord.<span style="color: #000000; font-weight: bold;">class</span>, 
                                       <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">Integer</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">56</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
StockDailyRecord sdr2 <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>StockDailyRecord<span style="color: #009900;">&#41;</span>session.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span>StockDailyRecord.<span style="color: #000000; font-weight: bold;">class</span>, 
                                       <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">Integer</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">57</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
Stock stock <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>Stock<span style="color: #009900;">&#41;</span>session.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span>Stock.<span style="color: #000000; font-weight: bold;">class</span>, <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">Integer</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">2</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
stock.<span style="color: #006633;">getStockDailyRecords</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">remove</span><span style="color: #009900;">&#40;</span>sdr1<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
stock.<span style="color: #006633;">getStockDailyRecords</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">remove</span><span style="color: #009900;">&#40;</span>sdr2<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
session.<span style="color: #006633;">saveOrUpdate</span><span style="color: #009900;">&#40;</span>stock<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p><em>Output</em></p><div class="wp_syntax"><div class="code"><pre class="bash" style="font-family:monospace;">Hibernate: 
    delete from mkyong.stock_daily_record 
    where <span style="color: #007800;">DAILY_RECORD_ID</span>=?
Hibernate: 
    delete from mkyong.stock_daily_record 
    where <span style="color: #007800;">DAILY_RECORD_ID</span>=?</pre></div></div><blockquote><p>In short, delete-orphan allow parent table to delete few records (delete orphan) in its child table.</p></blockquote><h3>How to enable cascade ?</h3><p>The cascade is supported in both XML mapping file and annotation.</p><h4>1. XML mapping file</h4><p>In XML mapping file, declared the <strong>cascade</strong> keyword in your relationship variable.</p><div class="wp_syntax"><div class="code"><pre class="xml" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">&lt;!-- Stock.hbm.xml --&gt;</span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;set</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;stockDailyRecords&quot;</span> <span style="color: #000066;">cascade</span>=<span style="color: #ff0000;">&quot;save-update, delete&quot;</span> </span>
<span style="color: #009900;">        <span style="color: #000066;">table</span>=<span style="color: #ff0000;">&quot;stock_daily_record&quot;</span> ...<span style="color: #000000; font-weight: bold;">&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
            <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;column</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;STOCK_ID&quot;</span> <span style="color: #000066;">not-null</span>=<span style="color: #ff0000;">&quot;true&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/key<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>
      <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;one-to-many</span> <span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;com.mkyong.common.StockDailyRecord&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span>
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/set<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></div></div><h4>2. Annotation</h4><p>In annotation, declared the <strong>CascadeType.SAVE_UPDATE</strong> (save, update) and <strong>CascadeType.REMOVE</strong> (delete) in @Cascade annotation.</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">        <span style="color: #666666; font-style: italic;">//Stock.java</span>
        @OneToMany<span style="color: #009900;">&#40;</span>mappedBy <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;stock&quot;</span><span style="color: #009900;">&#41;</span>
        @Cascade<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>CascadeType.<span style="color: #006633;">SAVE_UPDATE</span>, CascadeType.<span style="color: #006633;">DELETE</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>
	<span style="color: #000000; font-weight: bold;">public</span> Set<span style="color: #339933;">&lt;</span>StockDailyRecord<span style="color: #339933;">&gt;</span> getStockDailyRecords<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
		<span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">stockDailyRecords</span><span style="color: #339933;">;</span>
	<span style="color: #009900;">&#125;</span></pre></div></div><p>Further study &#8211; <a href="http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/" target="_blank">Cascade – JPA &#038; Hibernate annotation common mistake</a>.</p><h3>inverse vs cascade</h3><p>Both are totally different notions, see the <a href="http://www.mkyong.com/hibernate/different-between-cascade-and-inverse/" target="_blank">differential here</a>.</p><h3>Conclusion</h3><p>Cascade is a very convenient feature to manage the state of the other side automatically. However this feature come with a price, if you do not use it wisely (update or delete), it will generate many unnecessary cascade effects (cascade update) to slow down your performance, or delete (cascade delete) some data you didn&#8217;t expected.</p><div id="post-meta-extra"> Tags : <span class="post-tag"><a href="http://www.mkyong.com/tag/cascade/" rel="tag">cascade</a> <a href="http://www.mkyong.com/tag/hibernate/" rel="tag">hibernate</a></span></div><div style="margin:20px 0;"><center><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-2836379775501347" data-ad-slot="7146814087" data-ad-region="mkyongregion"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></center></div><div id="author-info"><div id="big-author-avatar"> <img alt='' src='http://0.gravatar.com/avatar/622c70d2908e68ecc070ca6754245bb2?s=100&amp;d=http%3A%2F%2Fwww.mkyong.com%2Fwp-content%2Fthemes%2Fmkyongnew%2Fimages%2Favatar-guest.jpg%3Fs%3D100&amp;r=G' class='avatar avatar-100 photo' height='100' width='100' /></div><div id="author-description"><div id="author-link"> <a href="http://www.mkyong.com/author/mkyong/" rel="author"> mkyong </a></div> Founder of Mkyong.com, love Java and open source stuff. Follow him on <a href="https://twitter.com/mkyong">Twitter</a>, or befriend him on <a href="http://www.facebook.com/java.tutorial">Facebook</a> or <a href="https://plus.google.com/110948163568945735692?rel=author">Google Plus</a>. If you like my tutorials, consider making a <a href="http://www.mkyong.com/blog/donate-to-charity/">donation to the charity</a>, thanks.</div><div class="clearboth"></div></div><div id="post-after-related-post"><h4  class="related_post_title">Related Posts</h4><ul class="related_post"><li><a href="http://www.mkyong.com/hibernate/cascade-jpa-hibernate-annotation-common-mistake/" title="Cascade &#8211; JPA &#038; Hibernate annotation common mistake">Cascade &#8211; JPA &#038; Hibernate annotation common mistake</a></li><li><a href="http://www.mkyong.com/hibernate/different-between-cascade-and-inverse/" title="Different between cascade and inverse">Different between cascade and inverse</a></li><li><a href="http://www.mkyong.com/spring-security/spring-security-hibernate-xml-example/" title="Spring Security + Hibernate XML Example">Spring Security + Hibernate XML Example</a></li><li><a href="http://www.mkyong.com/hibernate/java-lang-classnotfoundexception-org-hibernate-service-jta-platform-spi-jtaplatform/" title="java.lang.ClassNotFoundException: org.hibernate.service.jta.platform.spi.JtaPlatform">java.lang.ClassNotFoundException: org.hibernate.service.jta.platform.spi.JtaPlatform</a></li><li><a href="http://www.mkyong.com/hibernate/hibernate-component-mapping-example/" title="Hibernate component mapping example">Hibernate component mapping example</a></li></ul></div><div id="post-after-popular-post"><h4>Popular Posts</h4><ul><li><a href="/featured/top-8-java-people-you-should-know/">Top 8 Java People You Should Know</a></li><li><a href="/featured/top-20-java-websites/">Top 20 Java Websites</a></li><li><a href="/featured/top-5-free-java-ebooks/">Top 5 Free Java eBooks</a></li><li><a href="/regular-expressions/10-java-regular-expression-examples-you-should-know/">Top 10 Java Regular Expression Examples</a></li><li><a href="/featured/top-5-open-source-qa-systems/">Top 5 Open Source Q&A Systems</a></li></ul></div><div class="clearboth"></div></div></article><div id='st-tutorial-list'><div id='st-tutorial-title'> You might also like following tutorials :</div><ul><li><a href='/tutorials/hibernate-tutorials/' title='Hibernate Tutorials'><div class='images img-border img-hibernate'></div></a></li><li><a href='/tutorials/quartz-scheduler-tutorial/' title='Quartz Scheduler Tutorials'><div class='images img-border img-quartz'></div></a></li><li><a href='/tutorials/jsf-2-0-tutorials/' title='JSF 2 Tutorials'><div class='images img-border img-jsf2'></div></a></li><li><a href='/tutorials/jax-ws-tutorials/' title='JAX-WS Tutorials'><div class='images img-border img-jaxws'></div></a></li><li><a href='/tutorials/java-mongodb-tutorials/' title='Java MongoDB Tutorials'><div class='images img-border img-mongodb'></div></a></li></ul><div class='clearboth'></div></div><div style="padding:0 20px 20px 0"><div data-type="ad" data-publisher="lqm.j2ee.site" data-zone="ron" data-format="728x90" data-tags="Java%2cSpring%2cAndroid%2cMobile%2cjQuery%2cUnit%20Test%2cASP.NET%20MVC%2cDI%2cTDD"></div></div><div id="post-comments"><div id="disqus_thread"><div id="dsq-content"><ul id="dsq-comments"><li class="comment even thread-even depth-1" id="dsq-comment-137635"><div id="dsq-comment-header-137635" class="dsq-comment-header"> <cite id="dsq-cite-137635"> <span id="dsq-author-user-137635">riham</span> </cite></div><div id="dsq-comment-body-137635" class="dsq-comment-body"><div id="dsq-comment-message-137635" class="dsq-comment-message"><p>very nice thanks alot</p></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-136244"><div id="dsq-comment-header-136244" class="dsq-comment-header"> <cite id="dsq-cite-136244"> <span id="dsq-author-user-136244">johny</span> </cite></div><div id="dsq-comment-body-136244" class="dsq-comment-body"><div id="dsq-comment-message-136244" class="dsq-comment-message"><p>I read topic about inverse=&#8221;false&#8221; and inverse=&#8221;true&#8221;.<br /> when using cascade=&#8221;delete&#8221;  (cascade=&#8221;all&#8221; ) and inverse=&#8221;false&#8221; in file xml.<br /> example code :<br /> Stock stock = new Stock();<br /> stock  = stockDao.getStock ById(7);<br /> stock Dao.deleteStock (stock);</p><p>Error : could not execute statement<br /> Because Hibernate will update StockId=null</p><p>I want explain more ! thank.</p><p>when using inverse=&#8221;false&#8221; everything is good.</p></div></div><ul class="children"><li class="comment even depth-2" id="dsq-comment-139831"><div id="dsq-comment-header-139831" class="dsq-comment-header"> <cite id="dsq-cite-139831"> <span id="dsq-author-user-139831">nithiyasri</span> </cite></div><div id="dsq-comment-body-139831" class="dsq-comment-body"><div id="dsq-comment-message-139831" class="dsq-comment-message"><p>Yes.. Even I had the same issue of when combining invere=true and cascade=&#8221;delete&#8221;, it doesnt work. Tried</p><p>session.delete(stock_daily_record) also.</p></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="dsq-comment-129996"><div id="dsq-comment-header-129996" class="dsq-comment-header"> <cite id="dsq-cite-129996"> <span id="dsq-author-user-129996">JESUS DAVID RUBIO</span> </cite></div><div id="dsq-comment-body-129996" class="dsq-comment-body"><div id="dsq-comment-message-129996" class="dsq-comment-message"><p>I have a question, when you write about the &#8220;delete&#8221; you explained the cascade effect would delete all the objects related to that object (one to many), then you talked about the &#8220;delete-orphan&#8221;, which it is used to delete just related objects to a main one, now my question is how can I write the clause to get both effects at the same time?  the clause would be &#8220;delete-delete-ophan&#8221; or &#8220;delete-orphan&#8221; will do it?</p></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-125686"><div id="dsq-comment-header-125686" class="dsq-comment-header"> <cite id="dsq-cite-125686"> http://momblogsociety.com/profile-15087/info/ <span id="dsq-author-user-125686">xfire.com</span> </cite></div><div id="dsq-comment-body-125686" class="dsq-comment-body"><div id="dsq-comment-message-125686" class="dsq-comment-message"><p>Hey there! I understand this is somewhat off-topic but I<br /> had to ask. Does operating a well-established blog such<br /> as yours require a large amount of work? I&#8217;m brand new to running a blog however I do write in my journal on a daily basis. I&#8217;d like to start a blog<br /> so I will be able to share my experience and feelings online.</p><p>Please let me know if you have any suggestions or tips for brand new aspiring blog<br /> owners. Appreciate it!</p></div></div></li><li class="comment odd alt thread-even depth-1" id="dsq-comment-125280"><div id="dsq-comment-header-125280" class="dsq-comment-header"> <cite id="dsq-cite-125280"> <span id="dsq-author-user-125280">Nick</span> </cite></div><div id="dsq-comment-body-125280" class="dsq-comment-body"><div id="dsq-comment-message-125280" class="dsq-comment-message"><p>In a example similar to this<br /> for stock.getStockDailyRecords().add(stockDailyRecords);</p><p>I am getting null pointer exception for stock.getStockDailyRecords().</p><p>How do I avoid this?</p></div></div><ul class="children"><li class="comment even depth-2" id="dsq-comment-136243"><div id="dsq-comment-header-136243" class="dsq-comment-header"> <cite id="dsq-cite-136243"> <span id="dsq-author-user-136243">johny</span> </cite></div><div id="dsq-comment-body-136243" class="dsq-comment-body"><div id="dsq-comment-message-136243" class="dsq-comment-message"><p>you try :</p><p>if (stock.getStockDailyRecords() == null) {<br /> stock.setStockDailyRecords(new HashSet());<br /> }<br /> stock.getStockDailyRecords().add(stockDailyRecords);</p></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-124038"><div id="dsq-comment-header-124038" class="dsq-comment-header"> <cite id="dsq-cite-124038"> <span id="dsq-author-user-124038">Lord0</span> </cite></div><div id="dsq-comment-body-124038" class="dsq-comment-body"><div id="dsq-comment-message-124038" class="dsq-comment-message"><p>Thanks &#8211; your delete-orphan stuff helped me a lot</p></div></div></li><li class="comment even thread-even depth-1" id="dsq-comment-123982"><div id="dsq-comment-header-123982" class="dsq-comment-header"> <cite id="dsq-cite-123982"> <span id="dsq-author-user-123982">Lulu88</span> </cite></div><div id="dsq-comment-body-123982" class="dsq-comment-body"><div id="dsq-comment-message-123982" class="dsq-comment-message"><p>THANK YOU SO MUCH!!!</p><p>I struggled for TWO DAYS with an error and this solved it for me!! :D</p><p>Genius you are ;)</p></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-122024"><div id="dsq-comment-header-122024" class="dsq-comment-header"> <cite id="dsq-cite-122024"> <span id="dsq-author-user-122024">chejomolina</span> </cite></div><div id="dsq-comment-body-122024" class="dsq-comment-body"><div id="dsq-comment-message-122024" class="dsq-comment-message"><p>this it really help me a lot thank you</p></div></div></li><li class="comment even thread-even depth-1" id="dsq-comment-83552"><div id="dsq-comment-header-83552" class="dsq-comment-header"> <cite id="dsq-cite-83552"> http://þÿ <span id="dsq-author-user-83552">Tamatha Sailor</span> </cite></div><div id="dsq-comment-body-83552" class="dsq-comment-body"><div id="dsq-comment-message-83552" class="dsq-comment-message"><p>Hello, Neat post. There is a problem along with your web site in internet explorer, might check this¡K IE nonetheless is the marketplace chief and a big component to other folks will leave out your excellent writing because of this problem.</p></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-82241"><div id="dsq-comment-header-82241" class="dsq-comment-header"> <cite id="dsq-cite-82241"> <span id="dsq-author-user-82241">Cristian Daniel Ortiz</span> </cite></div><div id="dsq-comment-body-82241" class="dsq-comment-body"><div id="dsq-comment-message-82241" class="dsq-comment-message"><p>hi. Mkyong. how you doing.. i have a One to many relationship.. and working very well. but when i try to update the many relationship is insert new rows instead of deleting the old records and updating the new records&#8230;</p><p>i have a table Users and other table usersbyline. suppose the relationship like this.</p><p>Users have one or many Usersbyline. my code is the next.</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">static</span> <span style="color: #000066; font-weight: bold;">void</span> main<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span>...<span style="color: #006633;">Arg</span><span style="color: #009900;">&#41;</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span>
    <span style="color: #009900;">&#123;</span>                
        Session Session <span style="color: #339933;">=</span> HibernateUtil.<span style="color: #006633;">getSessionFactory</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">openSession</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #003399;">System</span>.<span style="color: #006633;">out</span>.<span style="color: #006633;">println</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;--------</span>Start<span style="color: #339933;">-----------------------&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #003399;">Long</span> A <span style="color: #339933;">=</span> <span style="color: #003399;">System</span>.<span style="color: #006633;">currentTimeMillis</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #003399;">Integer</span> idUser     <span style="color: #339933;">=</span> <span style="color: #cc66cc;">25</span><span style="color: #339933;">;</span>
        <span style="color: #003399;">String</span> <span style="color: #003399;">Operation</span> <span style="color: #339933;">=</span> <span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>edit<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;;</span>        
        org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">Usuarios</span> Users <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">Usuarios</span><span style="color: #009900;">&#41;</span>Session.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span>org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">Usuarios</span>.<span style="color: #000000; font-weight: bold;">class</span>,idUser<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">//Ignore this.</span>
        <span style="color: #000000; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span>Users<span style="color: #339933;">==</span><span style="color: #000066; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #003399;">System</span>.<span style="color: #006633;">out</span>.<span style="color: #006633;">println</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>User Not Found...<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><span style="color: #000000; font-weight: bold;">return</span><span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span>
        <span style="color: #003399;">Boolean</span> isInsert <span style="color: #339933;">=</span> <span style="color: #003399;">Operation</span>.<span style="color: #006633;">equalsIgnoreCase</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>add<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">?</span><span style="color: #000066; font-weight: bold;">true</span><span style="color: #339933;">:</span><span style="color: #000066; font-weight: bold;">false</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">//CRUD operation               </span>
        UsuarioController Controller <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> UsuarioController<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">setClazz</span><span style="color: #009900;">&#40;</span>Users<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">setSession</span><span style="color: #009900;">&#40;</span>Session<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">setShouldIUseSessionFromChild</span><span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #003399;">String</span>  idLinea<span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #cc66cc;">1000009</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>.<span style="color: #006633;">split</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>,<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        java.<span style="color: #006633;">util</span>.<span style="color: #006633;">Set</span><span style="color: #339933;">&amp;</span>lt<span style="color: #339933;">;</span>org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">UsuariosLinea</span><span style="color: #339933;">&amp;</span>gt<span style="color: #339933;">;</span>ULineas <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> java.<span style="color: #006633;">util</span>.<span style="color: #006633;">HashSet</span><span style="color: #339933;">&amp;</span>lt<span style="color: #339933;">;</span>org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">UsuariosLinea</span><span style="color: #339933;">&amp;</span>gt<span style="color: #339933;">;</span><span style="color: #009900;">&#40;</span>idLinea.<span style="color: #006633;">length</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">for</span><span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> Item<span style="color: #339933;">:</span>idLinea<span style="color: #009900;">&#41;</span><span style="color: #666666; font-style: italic;">//adding the new lines to the user. i want to delete the previous. </span>
        <span style="color: #009900;">&#123;</span> 
               org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">UsuariosLinea</span> UsuariosLinea <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">UsuariosLinea</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
               UsuariosLinea.<span style="color: #006633;">setLinea</span><span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">Lineas</span><span style="color: #009900;">&#40;</span>Item<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>              
               UsuariosLinea.<span style="color: #006633;">setUsuario</span><span style="color: #009900;">&#40;</span>Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">Clazz</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
               ULineas.<span style="color: #006633;">add</span><span style="color: #009900;">&#40;</span>UsuariosLinea<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
        Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">Clazz</span>.<span style="color: #006633;">setUsuariosLineas</span><span style="color: #009900;">&#40;</span>ULineas<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>    
        <span style="color: #003399;">System</span>.<span style="color: #006633;">out</span>.<span style="color: #006633;">println</span><span style="color: #009900;">&#40;</span>Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">Clazz</span>.<span style="color: #006633;">getUsuariosLineas</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">size</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        Controller.<span style="color: #006633;">Dao</span>.<span style="color: #006633;">saveOrUpdate</span><span style="color: #009900;">&#40;</span>isInsert<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>                                                
        <span style="color: #003399;">Long</span> B <span style="color: #339933;">=</span> <span style="color: #003399;">System</span>.<span style="color: #006633;">currentTimeMillis</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>        
        <span style="color: #003399;">String</span> <span style="color: #003399;">Action</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>isInsert<span style="color: #009900;">&#41;</span><span style="color: #339933;">?</span><span style="color: #009900;">&#40;</span><span style="color: #003399;">System</span>.<span style="color: #006633;">currentTimeMillis</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">-</span>A<span style="color: #009900;">&#41;</span><span style="color: #339933;">+&amp;</span>quot<span style="color: #339933;">;</span>ms..<span style="color: #009900;">&#91;</span>En Executives<span style="color: #009900;">&#91;</span>Inserting<span style="color: #009900;">&#93;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;:</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#40;</span><span style="color: #003399;">System</span>.<span style="color: #006633;">currentTimeMillis</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">-</span>A<span style="color: #009900;">&#41;</span><span style="color: #339933;">+&amp;</span>quot<span style="color: #339933;">;</span>ms..<span style="color: #009900;">&#91;</span>En Executives<span style="color: #009900;">&#91;</span>Updating<span style="color: #009900;">&#93;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>    
        <span style="color: #003399;">System</span>.<span style="color: #006633;">out</span>.<span style="color: #006633;">println</span><span style="color: #009900;">&#40;</span><span style="color: #003399;">Action</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">//String the client.</span>
        JavaMisc.<span style="color: #006633;">cleanResource</span><span style="color: #009900;">&#40;</span>Session<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span></pre></div></div><p>suppose the user have related 2 Users line with idLine is 1000011 and 1000012; all i want to do is.. when the user is update delete the old records the user have and insert the new ones. in this case only 1000011. but i am getting the old records + the new ones 4 records related to the user. what i am doing wrong.</p><p>Users.java</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">    @OneToMany<span style="color: #009900;">&#40;</span>fetch <span style="color: #339933;">=</span> FetchType.<span style="color: #006633;">EAGER</span>, mappedBy <span style="color: #339933;">=</span> <span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>Usuario<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span><span style="color: #009900;">&#41;</span>
    @Cascade<span style="color: #009900;">&#40;</span>CascadeType.<span style="color: #006633;">ALL</span><span style="color: #009900;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">private</span> Set<span style="color: #339933;">&amp;</span>lt<span style="color: #339933;">;</span>org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">UsuariosLinea</span><span style="color: #339933;">&amp;</span>gt<span style="color: #339933;">;</span> UsuariosLineas <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> HashSet<span style="color: #339933;">&amp;</span>lt<span style="color: #339933;">;</span>org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">UsuariosLinea</span><span style="color: #339933;">&amp;</span>gt<span style="color: #339933;">;</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></div></div><p>UsersByLine.java</p><div class="wp_syntax"><div class="code"><pre class="java" style="font-family:monospace;">    @Id
    @GeneratedValue<span style="color: #009900;">&#40;</span>strategy<span style="color: #339933;">=</span>GenerationType.<span style="color: #006633;">IDENTITY</span><span style="color: #009900;">&#41;</span>
    @Column<span style="color: #009900;">&#40;</span>name<span style="color: #339933;">=&amp;</span>quot<span style="color: #339933;">;</span>id<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>,nullable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">false</span>,updatable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">false</span>,length<span style="color: #339933;">=</span><span style="color: #cc66cc;">10</span>,insertable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #003399;">Integer</span> Id<span style="color: #339933;">;</span>
    @ManyToOne<span style="color: #009900;">&#40;</span>fetch <span style="color: #339933;">=</span> FetchType.<span style="color: #006633;">LAZY</span><span style="color: #009900;">&#41;</span>
    @JoinColumn<span style="color: #009900;">&#40;</span>name <span style="color: #339933;">=</span> <span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>iduser<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>,nullable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">false</span>,insertable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">true</span>,updatable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">private</span> org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">Usuarios</span> Usuario<span style="color: #339933;">;</span>
    @ManyToOne<span style="color: #009900;">&#40;</span>fetch <span style="color: #339933;">=</span> FetchType.<span style="color: #006633;">EAGER</span><span style="color: #009900;">&#41;</span>
    @JoinColumn<span style="color: #009900;">&#40;</span>name <span style="color: #339933;">=</span> <span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>idlinea<span style="color: #339933;">&amp;</span>quot<span style="color: #339933;">;</span>,nullable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">false</span>,insertable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">true</span>,updatable<span style="color: #339933;">=</span><span style="color: #000066; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span>
    <span style="color: #000000; font-weight: bold;">private</span> org.<span style="color: #006633;">com</span>.<span style="color: #006633;">Models</span>.<span style="color: #006633;">Lineas</span> Linea<span style="color: #339933;">;</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #003399;">Integer</span> getId<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #000000; font-weight: bold;">return</span> Id<span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setId<span style="color: #009900;">&#40;</span><span style="color: #003399;">Integer</span> Id<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">Id</span> <span style="color: #339933;">=</span> Id<span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #000000; font-weight: bold;">public</span> Lineas getLinea<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #000000; font-weight: bold;">return</span> Linea<span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setLinea<span style="color: #009900;">&#40;</span>Lineas Linea<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">Linea</span> <span style="color: #339933;">=</span> Linea<span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #000000; font-weight: bold;">public</span> Usuarios getUsuario<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #000000; font-weight: bold;">return</span> Usuario<span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setUsuario<span style="color: #009900;">&#40;</span>Usuarios Usuario<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">Usuario</span> <span style="color: #339933;">=</span> Usuario<span style="color: #339933;">;</span><span style="color: #009900;">&#125;</span></pre></div></div><p>any help is huge appreciate.</p></div></div></li><li class="comment even thread-even depth-1" id="dsq-comment-72977"><div id="dsq-comment-header-72977" class="dsq-comment-header"> <cite id="dsq-cite-72977"> <span id="dsq-author-user-72977">Naresh Pokuri</span> </cite></div><div id="dsq-comment-body-72977" class="dsq-comment-body"><div id="dsq-comment-message-72977" class="dsq-comment-message"><p>All these cascade operations works with only Bi-directional associations, right? or It can support unidirectional associations? What about inverse then&#8230;I think that should work with Bidirectional.</p><p>Thank you</p></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-72675"><div id="dsq-comment-header-72675" class="dsq-comment-header"> <cite id="dsq-cite-72675"> <span id="dsq-author-user-72675">Surender</span> </cite></div><div id="dsq-comment-body-72675" class="dsq-comment-body"><div id="dsq-comment-message-72675" class="dsq-comment-message"><p>Hi</p><p>your article is too good . very easy to undersatnd and get the basics right.<br /> i have a requiremnt where my StockDetail extend my stock class and when i say<br /> session.save(StockDetail ); which is my child class<br /> a record should be inserted into parent table(Stock) and then insertion should happen in my child table(StockDetail)</p></div></div></li><li class="comment even thread-even depth-1" id="dsq-comment-71658"><div id="dsq-comment-header-71658" class="dsq-comment-header"> <cite id="dsq-cite-71658"> http://samyrmoises.wordpress.com <span id="dsq-author-user-71658">Samyr Moises</span> </cite></div><div id="dsq-comment-body-71658" class="dsq-comment-body"><div id="dsq-comment-message-71658" class="dsq-comment-message"><p>Thanks indeed!It was simple and great!<br /> It helped me a lot!</p><p>See ya in the future!</p></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-65130"><div id="dsq-comment-header-65130" class="dsq-comment-header"> <cite id="dsq-cite-65130"> <span id="dsq-author-user-65130">Scott</span> </cite></div><div id="dsq-comment-body-65130" class="dsq-comment-body"><div id="dsq-comment-message-65130" class="dsq-comment-message"><p>Thanks, it&#8217;s very easy to understand the cascade from your article!</p></div></div></li><li class="comment even thread-even depth-1" id="dsq-comment-58969"><div id="dsq-comment-header-58969" class="dsq-comment-header"> <cite id="dsq-cite-58969"> <span id="dsq-author-user-58969">George</span> </cite></div><div id="dsq-comment-body-58969" class="dsq-comment-body"><div id="dsq-comment-message-58969" class="dsq-comment-message"><p>Thanks for your excellent work. I am confused with your delete-orphan demo:<br /> if Stock side is not ownership (inverse=&#8221;false&#8221;), remove StockDailyRecord from its list will only lead to set StockDailyRecord.STOCK_ID to be null but won&#8217;t remove StockDailyRecord from DB.</p><p>What&#8217;s more:<br /> 1) I am using Hibernate 3.2.6<br /> 2) if I set many-to-one(insert=&#8221;false&#8221; update=&#8221;false&#8221;) in StockDailyRecord side. delete-orphan works properly.</p></div></div></li><li class="post pingback"><p>Pingback: <a href='http://www.mkyong.com/hibernate/different-between-cascade-and-inverse/' rel='external nofollow' class='url'>Different between cascade and inverse</a></p></li></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-48379"><div id="dsq-comment-header-48379" class="dsq-comment-header"> <cite id="dsq-cite-48379"> <span id="dsq-author-user-48379">Bill Leonard</span> </cite></div><div id="dsq-comment-body-48379" class="dsq-comment-body"><div id="dsq-comment-message-48379" class="dsq-comment-message"><p>I liked your article on fetch strategies but this one, imo, could be improved for explaining delete-orphan.  I found the following better: <a href="http://docs.jboss.org/hibernate/core/3.3/reference/en/html/example-parentchild.html" rel="nofollow">http://docs.jboss.org/hibernate/core/3.3/reference/en/html/example-parentchild.html</a></p><p>I&#8217;d emphasize that &#8216;delete-orphan&#8217; handles the case when we want to delete the child object from the parent&#8217;s collection and have this reflected in the database without having to do an explicit session.delete() on the child objects. e.g.<br /> 1) Without delete-orphan:<br /> stock.getStockDailyRecords().remove(sdr1);<br /> stock.getStockDailyRecords().remove(sdr2);<br /> sdr1.setStock(null);<br /> sdr2.setStock(null);<br /> session.saveOrUpdate(stock);<br /> results in an update to the the StockDailyRecord table to set the Foreign Key to Stock for sdr1 and sdr2 to null (keeps those records in that table)</p><p>2) With delete-orphan:<br /> The same code as above results in sdr1 and sdr2 being deleted.</p></div></div></li><li class="post pingback"><p>Pingback: <a href='http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example/' rel='external nofollow' class='url'>Hibernate &#8211; One-to-many relationship example</a></p></li></li><li class="comment even thread-even depth-1" id="dsq-comment-27953"><div id="dsq-comment-header-27953" class="dsq-comment-header"> <cite id="dsq-cite-27953"> <span id="dsq-author-user-27953">jeffmacn</span> </cite></div><div id="dsq-comment-body-27953" class="dsq-comment-body"><div id="dsq-comment-message-27953" class="dsq-comment-message"><p>why delete-orphan doesn&#8217;t work?</p><p>Session session = HibernateUtil.getSession();<br /> Transaction tx = session.beginTransaction();</p><p>Book book = (Book)session.get(Book.class, 1);</p><p>tx.commit();<br /> session.close();</p><p>Session session2 = HibernateUtil.getSession();<br /> Transaction tx2 = session2.beginTransaction();</p><p>Publisher publisher = (Publisher)session2.get(Publisher.class, 1);<br /> publisher.getBooks().remove(book);</p><p>session.saveOrUpdate(publisher);</p><p>tx2.commit();<br /> session2.close();</p></div></div><ul class="children"><li class="comment odd alt depth-2" id="dsq-comment-56421"><div id="dsq-comment-header-56421" class="dsq-comment-header"> <cite id="dsq-cite-56421"> <span id="dsq-author-user-56421">Huy</span> </cite></div><div id="dsq-comment-body-56421" class="dsq-comment-body"><div id="dsq-comment-message-56421" class="dsq-comment-message"><p>Not work cause you close session 1 too soon</p></div></div></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-23606"><div id="dsq-comment-header-23606" class="dsq-comment-header"> <cite id="dsq-cite-23606"> <span id="dsq-author-user-23606">Tarun Sapra</span> </cite></div><div id="dsq-comment-body-23606" class="dsq-comment-body"><div id="dsq-comment-message-23606" class="dsq-comment-message"><p>Excellent Work! best explanation of inverse i could find on the internet.</p></div></div></li><li class="comment odd alt thread-even depth-1" id="dsq-comment-17014"><div id="dsq-comment-header-17014" class="dsq-comment-header"> <cite id="dsq-cite-17014"> <span id="dsq-author-user-17014">Sudhakar</span> </cite></div><div id="dsq-comment-body-17014" class="dsq-comment-body"><div id="dsq-comment-message-17014" class="dsq-comment-message"><p>Your examples arequite simple and easy to understand..thanks and make I wish to have some more examples in spring mvc.</p></div></div><ul class="children"><li class="comment byuser comment-author-mkyong bypostauthor even depth-2" id="dsq-comment-17020"><div id="dsq-comment-header-17020" class="dsq-comment-header"> <cite id="dsq-cite-17020"> http://www.mkyong.com <span id="dsq-author-user-17020">mkyong</span> </cite></div><div id="dsq-comment-body-17020" class="dsq-comment-body"><div id="dsq-comment-message-17020" class="dsq-comment-message"><p>Please visit this collection of Spring MVC tutorials.</p></div></div><ul class="children"><li class="comment odd alt depth-3" id="dsq-comment-60102"><div id="dsq-comment-header-60102" class="dsq-comment-header"> <cite id="dsq-cite-60102"> <span id="dsq-author-user-60102">chetan</span> </cite></div><div id="dsq-comment-body-60102" class="dsq-comment-body"><div id="dsq-comment-message-60102" class="dsq-comment-message"><p>You simply doing great job man. With such simple example you making people knowledgeable about complex concpets of hibernate.</p><p>SIMPLY GREAT!!!</p></div></div></li></ul></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-14490"><div id="dsq-comment-header-14490" class="dsq-comment-header"> <cite id="dsq-cite-14490"> http://webcomoumtodo.blogspot.com <span id="dsq-author-user-14490">Rodrigo Machado</span> </cite></div><div id="dsq-comment-body-14490" class="dsq-comment-body"><div id="dsq-comment-message-14490" class="dsq-comment-message"><p>Thanks man! It&#8217;s help so much!</p></div></div></li><li class="comment odd alt thread-even depth-1" id="dsq-comment-11605"><div id="dsq-comment-header-11605" class="dsq-comment-header"> <cite id="dsq-cite-11605"> <span id="dsq-author-user-11605">Ram</span> </cite></div><div id="dsq-comment-body-11605" class="dsq-comment-body"><div id="dsq-comment-message-11605" class="dsq-comment-message"><p>good article buddy. keep it up.. thx.</p></div></div></li><li class="post pingback"><p>Pingback: <a href='http://www.mkyong.com/tutorials/hibernate-tutorials/' rel='external nofollow' class='url'>Hibernate Tutorials | Tutorials</a></p></li></li></ul></div></div><script type="text/javascript">/*<![CDATA[*/var disqus_url='http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/';var disqus_identifier='3177 http://www.mkyong.com/?p=3177';var disqus_container_id='disqus_thread';var disqus_domain='disqus.com';var disqus_shortname='mkyong';var disqus_title="Hibernate &#8211; Cascade example (save, update, delete and delete-orphan)";var disqus_config=function(){var config=this;config.language='';config.callbacks.preData.push(function(){document.getElementById(disqus_container_id).innerHTML='';});config.callbacks.onReady.push(function(){var script=document.createElement('script');script.async=true;script.src='?cf_action=sync_comments&post_id=3177';var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript);});};/*]]>*/</script><script type="text/javascript">/*<![CDATA[*/var DsqLocal={'trackbacks':[{'author_name':"Hibernate Tutorials | Tutorials",'author_url':"http:\/\/www.mkyong.com\/tutorials\/hibernate-tutorials\/",'date':"03\/31\/2010 08:21 AM",'excerpt':"[...] Cascade example (save, update, delete and delete-orphan) Cascade examples in save, update, delete and delete orphan. And the different &hellip;",'type':"pingback"},{'author_name':"Hibernate &#8211; One-to-many relationship example",'author_url':"http:\/\/www.mkyong.com\/hibernate\/hibernate-one-to-many-relationship-example\/",'date':"01\/31\/2011 08:14 AM",'excerpt':"[...] Saving the session.save(stockDailyRecords); is not necessary, you can enable the cascade option to save the stockDailyRecords automatically, read more &hellip;",'type':"pingback"},{'author_name':"Different between cascade and inverse",'author_url':"http:\/\/www.mkyong.com\/hibernate\/different-between-cascade-and-inverse\/",'date':"04\/14\/2011 11:07 AM",'excerpt':"[...] It will inserted or updated the record into STOCK table and call another insert or update statement (cascade=&#8221;save-update&#8221;) on &hellip;",'type':"pingback"}],'trackback_url':"http:\/\/www.mkyong.com\/hibernate\/hibernate-cascade-example-save-update-delete-and-delete-orphan\/trackback\/"};/*]]>*/</script><script type="text/javascript">/*<![CDATA[*/(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.'+'disqus.com'+'/embed.js?pname=wordpress&pver=2.74';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();/*]]>*/</script></div></div><!-- google_ad_section_end --></div><div class="span4"><div id="sidebar"><div class="sidebar-ads"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-2836379775501347" data-ad-slot="7072877400" data-ad-region="mkyongregion"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="sidebar-ads"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-2836379775501347" data-ad-slot="5738517670" data-ad-region="mkyongregion"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="sidebar-ads" id="sidebar-fb"><div class='dd-loading' id='dd-fbpage'></div><iframe id='dd-fbpage-iframe' src='' height='0' width='0' scrolling='no' frameborder='0' style="border:none;overflow:hidden;" allowTransparency="true" ></iframe></div><div class="sidebar-ads"><div data-type="ad" data-publisher="lqm.j2ee.site" data-zone="ron" data-format="300x250" data-tags="Java%2cSpring%2cAndroid%2cMobile%2cjQuery%2cUnit%20Test%2cASP.NET%20MVC%2cDI%2cTDD"></div></div><h2>Recent Posts</h2><div class="block"><ul><li><img width="32" height="17" src="http://www.mkyong.com/wp-content/uploads/2014/07/jsf-log4j-logo-150x80.jpg" class="attachment-32x32 wp-post-image" alt="jsf log4j logo" /><div class="rt-label"><a href="http://www.mkyong.com/jsf2/jsf-2-log4j-integration-example/">JSF 2 + Log4j Integration Example </a></div><div class="clearboth"></div></li><li><img width="32" height="29" src="http://www.mkyong.com/wp-content/uploads/2014/07/logo-150x139.jpg" class="attachment-32x32 wp-post-image" alt="log4j logo" /><div class="rt-label"><a href="http://www.mkyong.com/logging/log4j-hello-world-example/">Log4j hello world example </a></div><div class="clearboth"></div></li><li><img width="32" height="29" src="http://www.mkyong.com/wp-content/uploads/2014/07/logo-150x139.jpg" class="attachment-32x32 wp-post-image" alt="log4j logo" /><div class="rt-label"><a href="http://www.mkyong.com/logging/log4j-xml-example/">log4j.xml Example </a></div><div class="clearboth"></div></li><li><img width="32" height="32" src="http://www.mkyong.com/wp-content/uploads/2012/07/spring-logo.png" class="attachment-32x32 wp-post-image" alt="spring-logo" /><div class="rt-label"><a href="http://www.mkyong.com/spring-security/spring-security-hibernate-annotation-example/">Spring Security + Hibernate Annotation Example </a></div><div class="clearboth"></div></li><li><img width="32" height="32" src="http://www.mkyong.com/wp-content/uploads/2012/07/spring-logo.png" class="attachment-32x32 wp-post-image" alt="spring-logo" /><div class="rt-label"><a href="http://www.mkyong.com/spring-security/spring-security-hibernate-xml-example/">Spring Security + Hibernate XML Example </a></div><div class="clearboth"></div></li></ul></div><h2>Popular Tutorials</h2><div class="block"><ul><li><img width="29" height="32" src="http://www.mkyong.com/wp-content/uploads/2012/03/android.png" class="attachment-32x32 wp-post-image" alt="android" /><div class="rt-label"><a rel="tooltip" title="Created : 2012-03-22 14:48:53" href="http://www.mkyong.com/tutorials/android-tutorial/">Android Tutorial </a></div><div class="clearboth"></div></li><li><img width="32" height="32" src="http://www.mkyong.com/wp-content/uploads/2012/07/jsf2-logo.png" class="attachment-32x32 wp-post-image" alt="jsf2-logo" /><div class="rt-label"><a rel="tooltip" title="Created : 2010-12-12 10:56:54" href="http://www.mkyong.com/tutorials/jsf-2-0-tutorials/">JSF 2.0 Tutorial </a></div><div class="clearboth"></div></li><li><img width="32" height="21" src="http://www.mkyong.com/wp-content/uploads/2010/04/Spring-tutorials-150x100.png" class="attachment-32x32 wp-post-image" alt="Spring tutorials" /><div class="rt-label"><a rel="tooltip" title="Created : 2010-04-01 11:09:26" href="http://www.mkyong.com/tutorials/spring-tutorials/">Spring Tutorial </a></div><div class="clearboth"></div></li><li><img width="32" height="21" src="http://www.mkyong.com/wp-content/uploads/2010/03/maven-tutorials-150x100.png" class="attachment-32x32 wp-post-image" alt="Maven tutorials" /><div class="rt-label"><a rel="tooltip" title="Created : 2010-03-31 08:24:51" href="http://www.mkyong.com/tutorials/maven-tutorials/">Maven Tutorial </a></div><div class="clearboth"></div></li><li><img width="32" height="21" src="http://www.mkyong.com/wp-content/uploads/2010/03/Hibernate-tutorials-150x100.png" class="attachment-32x32 wp-post-image" alt="Hibernate tutorials" /><div class="rt-label"><a rel="tooltip" title="Created : 2010-03-31 08:18:30" href="http://www.mkyong.com/tutorials/hibernate-tutorials/">Hibernate Tutorial </a></div><div class="clearboth"></div></li></ul></div><div class="sidebar-ads"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-2836379775501347" data-ad-slot="7953295395" data-ad-region = "mkyongregion"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><div class="sidebar-ads" style="text-align: center"><div data-type="ad" data-publisher="lqm.j2ee.site" data-zone="ron" data-format="160x600" data-tags="Java%2cSpring%2cAndroid%2cMobile%2cjQuery%2cUnit%20Test%2cASP.NET%20MVC%2cDI%2cTDD"></div></div></div></div></div></div> <script type='text/javascript'>var _wpcf7={"loaderUrl":"http:\/\/www.mkyong.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ...","cached":"1"};</script><footer><div id="footer-container"><div class="container"><div class="row"><div class="span4" id="footer-all-tut"><h3>All Available Tutorials</h3><ul class="unstyled"><li>Java Core Technologies :<div> <a href="/tutorials/java-io-tutorials/">Java I/O</a>, <a href="/tutorials/java-regular-expression-tutorials/">Java RegEx</a>, <a href="/tutorials/java-xml-tutorials/">Java XML</a>, <a href="/tutorials/java-json-tutorials/">Java JSON</a>, <a href="/tutorials/jdbc-tutorials/">JDBC</a>, <a href="/category/java/">Java Misc</a></div></li><li>J2EE Frameworks :<div> <a href="/tutorials/hibernate-tutorials/">Hibernate</a>, <a href="/tutorials/jsf-2-0-tutorials/">JSF 2.0</a>, <a href="/tutorials/spring-tutorials/">Spring Core</a>, <a href="/tutorials/spring-mvc-tutorials/">Spring MVC</a>, <a href="/tutorials/spring-security-tutorials/">Spring Security</a>, <a href="/tutorials/java-mongodb-tutorials/#spring-mongodb">Spring MongoDB</a>, <a href="/tutorials/spring-batch-tutorial/">Spring Batch</a><a href="/tutorials/wicket-tutorials/">Apache Wicket</a>, <a href="/tutorials/struts-tutorials/">Struts 1.x</a>, <a href="/tutorials/struts-2-tutorials/">Struts 2.x</a></div></li><li>Web Service :<div> <a href="/tutorials/jax-ws-tutorials/">JAX-WS (SOAP)</a>, <a href="/tutorials/jax-rs-tutorials/">JAX-RS (REST)</a></div></li><li>Build Tools :<div> <a href="/tutorials/maven-tutorials/">Maven</a>, <a href="/tutorials/apache-archiva-tutorials/">Archiva</a></div></li><li>Unit Test Frameworks :<div> <a href="/tutorials/junit-tutorials/">jUnit</a>, <a href="/tutorials/testng-tutorials/">TestNG</a></div></li><li>Others :<div> <a href="/tutorials/android-tutorial/">Android</a>, <a href="/tutorials/google-app-engine-tutorial/">Google App Engine</a>, <a href="/tutorials/jquery-tutorials/">jQuery</a>, <a href="/tutorials/java-mongodb-tutorials/">Java MongoDB</a>, <a href="/tutorials/quartz-scheduler-tutorial/">Quartz Scheduler</a></div></li></ul></div><div class="span3"><h3>Favorites Links</h3><ul class="unstyled"><li><a href="http://developer.android.com/training/index.html" target="_blank" rel="nofollow">Android Getting Started</a></li><li><a href="https://developers.google.com/appengine/docs/java/gettingstarted/" target="_blank" rel="nofollow">Google App Engine - Java</a></li><li><a href="http://www.dzone.com/" target="_blank" rel="nofollow">DZone - Fresh Links</a></li><li><a href="http://docs.oracle.com/javaee/5/tutorial/doc/docinfo.html" target="_blank" rel="nofollow">Official Java EE 5 Tutorial</a></li><li><a href="http://docs.oracle.com/javaee/6/tutorial/doc/docinfo.html" target="_blank" rel="nofollow">Official Java EE 6 Tutorial</a></li><li><a href="http://docs.oracle.com/javaee/7/tutorial/doc/" target="_blank" rel="nofollow">Official Java EE 7 Tutorial</a></li><li><a href="http://docs.spring.io/spring/docs/2.5.x/reference/index.html" target="_blank" rel="nofollow">Spring 2.5.x documentation</a></li><li><a href="http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/" target="_blank" rel="nofollow">Spring 3.2.x documentation</a></li><li><a href="http://docs.spring.io/spring-security/site/docs/3.2.x/reference/htmlsingle/" target="_blank">Spring Security 3.2.x documentation</a></li><li><a href="http://docs.jboss.org/hibernate/core/4.3/manual/en-US/html_single/" target="_blank" rel="nofollow">Hibernate core 4.3 documentation</a></li><li><a href="http://download.oracle.com/javase/6/docs/api/overview-summary.html" target="_blank" rel="nofollow">Java SE 6.0 API documentation</a></li><li><a href="http://jsp.java.net/" target="_blank" rel="nofollow">JSP home page</a></li><li><a href="http://javaserverfaces.java.net/" target="_blank" rel="nofollow">JSF home page</a></li><li><a href="http://www.eclipse.org/downloads/" target="_blank" rel="nofollow">Eclipse IDE for Java developer</a></li><li><a href="http://struts.apache.org/release/1.3.x/userGuide/index.html" target="_blank" rel="nofollow">Struts 1.3.x documentation</a></li><li><a href="http://struts.apache.org/release/2.3.x/docs/home.html" target="_blank" rel="nofollow">Struts 2.3.x documentation</a></li><li><a href="http://maven.apache.org/" target="_blank" rel="nofollow">Maven home page</a></li><li><a href="http://search.maven.org/" target="_blank" rel="nofollow">Maven central repository Search</a></li><li><a href="http://ant.apache.org/" target="_blank" rel="nofollow">Ant home page</a></li><li><a href="http://jax-ws.java.net/" target="_blank" rel="nofollow">JAX-WS Official Website</a></li><li><a href="http://jersey.java.net/" target="_blank" rel="nofollow">JAX-RS Official Website (Jersey)</a></li></ul></div><div class="span3"><h3>Friends &amp; Links</h3><ul class="unstyled"><input type="hidden" name="activepost" id="activepost" value="3177" /><li><a href="http://www.javacodegeeks.com/" target="_blank">Java Code Geeks</a></li><li><a href="http://www.videophpblog.com" target="_blank">PHP Tutorials</a></li><li><a href="http://www.tenthofmarch.com/" target="_blank">TenthOfMarch</a></li><li><a href="http://www.web2secure.com" target="_blank">Web Security Blog</a></li><li><a href="http://www.fromdev.com" target="_blank">Web Development</a></li><li><a href="http://beust.com" target="_blank">Cédric Beust (TestNG)</a></li></ul></div><div class="span4"><h3>About Us</h3><p> Mkyong.com is a weblog dedicated to Java/J2EE developers and Web Developers. We constantly publish useful tricks, tutorials on J2EE or web development.</p><p> All examples are simple, easy to read, and full source code available, and of course well tested in our development environment.</p> <strong>We're Social</strong><ol><li>Twitter - <a href="http://twitter.com/#!/mkyong" target="_blank">Follow Me</a></li><li>Facebook - <a href="http://www.facebook.com/java.tutorial" target="_blank">Like Me</a></li><li>Google Plus - <a href="https://plus.google.com/110948163568945735692" target="_blank">Add Me</a></li><li>RSS - <a href="http://feeds.feedburner.com/FeedForMkyong" target="_blank">Subscribe Me</a></li></ol></div></div></div></div><div id="footer-copyright"><div class="container"> Copyright &copy; 2008-2014 Mkyong.com, all rights reserved.</div></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-752408-5','mkyong.com');ga('send','pageview');</script><script type='text/javascript'>function _dmBootstrap(file){var _dma=document.createElement('script');_dma.type='text/javascript';_dma.async=true;_dma.src=('https:'==document.location.protocol?'https://':'http://')+file;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(_dma);}
function _dmFollowup(file){if(typeof DMAds==='undefined')_dmBootstrap('cdn2.DeveloperMedia.com/a.min.js');}
(function(){_dmBootstrap('cdn1.DeveloperMedia.com/a.min.js');setTimeout(_dmFollowup,2000);})();</script><script type="text/javascript" src="/wp-content/themes/mkyong-ma/js/core-latest.js?v=2013"></script><script type="text/javascript">function w3tc_load_js(u){var d=document,p=d.getElementsByTagName('HEAD')[0],c=d.createElement('script');c.type='text/javascript';c.src=u;p.appendChild(c);}</script><script type="text/javascript">w3tc_load_js('http://www.mkyong.com/wp-content/cache/minify/000000/481ba/default.include-footer.15c8b4.js');</script></body></html>